#!/bin/bash

# Initialize a scala project
# Usage: sinit <project name>

set -e

if [[ -z "$1" ]]; then
    echo "Please provide a project path." >&2
    exit 1
fi
if [[ -e "$1" ]]; then
    echo "Project $1 already exists. Aborting." >&2
    exit 1
fi

project="$1"
name=$(basename "$1")

echo "Creating project directories" >&2
mkdir "$project"
mkdir "$project/project"

echo "Initializing sbt configuration" >&2
cat > "$project/project/build.properties" <<EOF
sbt.version=0.13.11
EOF
cat > "$project/build.sbt" <<EOF
name := "$name"

scalaVersion := "2.11.8"
EOF

echo "Preparing git" >&2
cat > "$project/.gitignore" <<EOF
target/

*.class
*~
EOF

git -C "$project" init

echo "Project successfully initialized in $project" >&2

